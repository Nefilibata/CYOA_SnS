<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Sword and Sworcery</title>
    <style>
        main    {
            position: fixed; /* place it before .black */
            background-color: white;
            width: 100%;
            height: 100%;
            }
        .black      {
            position: fixed; /* place it behind main */
            background-color: black; /* make it black */
            width: 100%; /* make it fill available space */
            height: 100%; /* make it fill available space*/
        }

        body        {
            margin: 0; /* make it fill available space*/
        }
        .stats {
            position: fixed;
            top: 50%;
            left: 50%;
            border: 1px solid black;
            background-color: lightgrey;
            box-shadow: 5px 5px black;
            width: 80%;
            padding: 20px;
            transform: translate(-50%, -50%);
            display: none;
            }      
        .white {
            color: white;
        }

</style>
</head>
<body>
    <div class="black"></div>
    <main>
    
        <h1 id="h1">Chapter 1</h1>
        <h2 id="h2">Greetings traveller!</h2>
    
    <div class="stats js-stats">
        <h3>Here are your stats:</h3>
        <li class="js-name">Name:</li>
        <li class="js-age">Age:</li>
        <li class="js-hp">HP:</li>
        <li class="js-mana">Mana:</li>
    
        <button class="js-close-stats">Close Stats</button>
    </div>
    
    <button class="js-open-stats">View Stats</button>
    
    <p>What is your name, Hero?</p>
    <div>   
        <input type="text" class="js-user-name">
    </div>
    <p>How old are you? (between 9 and 90)</p>
    <div>
        <input type="number" class="js-user-age" min="9" max="90">
    </div>

    <button class="btn btn-begin">Begin</button>
    
    <div class="js-intro"></div>

    <h1 id="quest" class="white">Let's Go</h1>

    </main>

    <script>
       //select html elems
        var h1 = document.getElementById("h1")
        var h2 = document.getElementById("h2")
        var intro = document.querySelector(".js-intro")
        var jsName = document.querySelector(".js-name")
        var jsAge = document.querySelector(".js-age")
        var jsHP = document.querySelector(".js-hp")
        var jsMana = document.querySelector(".js-mana")

        //sets the clearBox function.
        // elementID = X.clearBox()
        var elementID = "";
        function clearBox(elementID)
        {
        document.getElementById(elementID).innerHTML = "";
        document.querySelector(elementID).innerText = "";
        }

        //button to view stats
        class Stats {
            constructor(){
                this.stats = document.querySelector(".js-stats")
                }
            open(){
                this.stats.style.display = 'initial'
                setStats(user)
                }
            close(){
                this.stats.style.display = 'none'
                }
            }
            const openBtn = document.querySelector(".js-open-stats")
            const closeBtn = document.querySelector(".js-close-stats")
            const stats = new Stats()

            openBtn.addEventListener('click', function(event){
                stats.open()
            })
            closeBtn.addEventListener('click', function(event){
                stats.close()
            }) 

        //create class for user's character
        class Character {
            constructor(name, age, hp, mana) {
                this.name=name, this.age=age, this.hp=hp, this.mana=mana;
                    }
                   
                }
        //input elements into a new class based on the user's input
                //classifies the user in its class.
                const  user = new Character("", "", "", "")

        //sets username to input value
        user.name = document.querySelector(".js-user-name")
        user.name.addEventListener('keyup', function(e) {
            user.name = event.target.value
            h2.innerText = `${user.name} comes to town`
            intro.innerText = `Barkeep: Aye, hello there ${user.name}.`
        })

        //sets userAge to input value
        user.age = document.querySelector(".js-user-age")
        user.age.addEventListener('keyup', function(e) {
            console.log(event.target.value)
            user.age = event.target.value
            h2.innerText = `${user.name} comes to town`
            user.mana = user.age*2
            user.hp = 1 + user.age/2
            intro.innerHTML = `Barkeep: Listen. I've got a quest for a foolhardy adventurer. Are you up for it ${user.name}?`;
                    })

        //sets user hp and mana based on their age. A high age = high mana but low hp.

        //sets the users stats
        var setStats = function setStats(){
                    jsName.innerText = `Name: ${user.name}`
                    jsAge.innerText = `Age: ${user.age}`
                    jsHP.innerText = `Health: ${user.hp}`
                    jsMana.innerText = `Spell power: ${user.mana}`
                }

        //alerts the user if they died and need to start over.      
        /*var deathSave = setInterval(function(){
            setStats()
            if(user.hp < 1 ){
                var death = `${user.name} failed their death save. Would you like me to resuurect you?`
                alert(death)
            } else {
            console.log(`${user.name} is Alive`) }
            }, 3000)
        */

        //grants quest to user on click; Fade's screen to black and sets text to white
        var begin = document.querySelector(".btn-begin")
        
        begin.addEventListener('click', function(event){
                console.log("double yay")
                begin.innerText = "Let's go"
                //Changes text colour to white for Stats
                var statStyle = document.querySelector(".stats")
                statStyle.classList.add("white")

                //code to fade to black
                const step = 0.025; // set the step of opacity change
                const timeInterval = 100; // set the sleep time of opacity change
                const times = 1 / step; // calculate times needed for opacity change
                document.getElementsByTagName(`main`)[0].style.opacity = `1`; // set initial opacity to make getting the float value of it work.
                let time = 0; // initially, the time of making changes is zero
                const lowerOpacity = window.setInterval(function() {
                        if (time + 1 === times) {
                        window.clearInterval(lowerOpacity);
                        } // clearInterval() when the time of changes has reached the needed times
                        document.getElementsByTagName(`main`)[0].style.opacity =
                        `${parseFloat(document.getElementsByTagName(`main`)[0].style.opacity) -
                        0.05}`; // set the opacity to make it dimmer
                        time += 1; // increment time to match the changed times
                        }
                    , timeInterval);


                //load new JS for second page?
                    })         
            
    </script>
</body>
</html>